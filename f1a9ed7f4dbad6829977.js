import{Camera}from"@mediapipe/camera_utils";import{SelfieSegmentation}from"@mediapipe/selfie_segmentation";import*as css from"./style.css";const videoElement=document.getElementsByClassName("inputVideo")[0],canvasElement=document.getElementsByClassName("outputCanvas")[0],canvasCtx=canvasElement.getContext("2d"),button=document.getElementsByClassName("startCamera")[0],selfieSegmentation=new SelfieSegmentation({locateFile:e=>`https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/${e}`});selfieSegmentation.setOptions({modelSelection:1}),selfieSegmentation.onResults((e=>{canvasCtx.save(),canvasCtx.clearRect(0,0,canvasElement.width,canvasElement.height),canvasCtx.drawImage(e.image,0,0,canvasElement.width,canvasElement.height),canvasCtx.globalCompositeOperation="destination-in",canvasCtx.drawImage(e.segmentationMask,0,0,canvasElement.width,canvasElement.height),canvasCtx.globalCompositeOperation="destination-over",canvasCtx.fillStyle="black",canvasCtx.fillRect(0,0,canvasElement.width,canvasElement.height),canvasCtx.restore()})),button.addEventListener("click",(()=>{let e=document.querySelector('input[name="cameraSelection"]:checked').value,t=document.querySelector(".inputs");new Camera(videoElement,{onFrame:async()=>{await selfieSegmentation.send({image:videoElement})},facingMode:e,width:1280,height:720}).start(),t.style.display="none"}));